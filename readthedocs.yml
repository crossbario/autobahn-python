version: 2

build:
  os: ubuntu-22.04
  tools:
    python: "3.11"
  commands:
    # Download conformance artifacts from GitHub Releases before building docs
    - bash .github/scripts/rtd-download-artifacts.sh
    # Install package with all extras needed for docs
    - pip install -e ".[dev,twisted,compress,serialization,encryption,scram]"
    # Create RTD output directory (required by RTD)
    - mkdir -p $READTHEDOCS_OUTPUT/html/
    # Build Sphinx documentation to RTD output directory
    - cd docs && sphinx-build -b html . $READTHEDOCS_OUTPUT/html
